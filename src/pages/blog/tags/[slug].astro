---
import Layout from "@layouts/Layout.astro";
import strapiAPI from "@lib/strapi.js";
import { Image } from "astro:assets";

export const prerender = false;

const { slug } = Astro.params;

if (!slug) {
  return new Response(null, { status: 404 });
}

// Fetch the tag
let tag = null;
try {
  const tags = await strapiAPI.getBlogTags();
  tag = tags.find((t: { slug: string }) => t.slug === slug);
  if (tag) {
    tag = strapiAPI.formatTag(tag);
  }
} catch (error) {
  console.error(`Failed to fetch tag with slug: ${slug}`, error);
}

if (!tag) {
  return new Response(null, { status: 404 });
}

// Pagination parameters
const currentPage = parseInt(Astro.url.searchParams.get("page") || "1");
const postsPerPage = 12;

// Fetch blog posts for this tag
let posts = [];
let totalPosts = 0;
let totalPages = 1;

try {
  const result = await strapiAPI.getBlogPosts({
    pagination: { page: currentPage, pageSize: postsPerPage },
    filters: { tags: { slug: { $eq: slug } } },
    sort: "publishedAt:desc",
  });

  posts = result.posts.map((post: any) => strapiAPI.formatBlogPost(post));
  totalPosts = result.meta.pagination?.total || 0;
  totalPages = result.meta.pagination?.pageCount || 1;
} catch (error) {
  console.error("Failed to fetch tag posts:", error);
}

const title = `#${tag.name} - Tag Archive`;
const description =
  tag.description || `Browse all articles tagged with ${tag.name}`;
---

<Layout title={title} description={description}>
  <main
    class="min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black relative overflow-hidden"
  >
    <!-- Background Pattern -->
    <div
      class="absolute inset-0 bg-gradient-to-br from-indigo-900/20 via-purple-900/20 to-gray-900/20"
    >
      <div
        class="absolute inset-0"
        style="background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0); background-size: 20px 20px;"
      >
      </div>
    </div>

    <!-- Animated Blog Elements -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <!-- Floating Pencils -->
      <div class="absolute top-20 left-10 opacity-20 animate-float-slow">
        <svg
          class="w-8 h-8 text-yellow-400 transform rotate-45"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
          ></path>
        </svg>
      </div>
      <div class="absolute top-40 right-20 opacity-20 animate-float-medium">
        <svg
          class="w-6 h-6 text-blue-400 transform -rotate-12"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"
          ></path>
        </svg>
      </div>

      <!-- Floating Books -->
      <div class="absolute top-60 left-1/4 opacity-20 animate-float-slow">
        <svg
          class="w-10 h-10 text-green-400 transform rotate-12"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M3 5v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2zm2 0h14v14H5V5z"
          ></path>
          <path d="M7 7h10v2H7zm0 4h10v2H7zm0 4h7v2H7z"></path>
        </svg>
      </div>
      <div class="absolute bottom-20 right-1/3 opacity-20 animate-float-fast">
        <svg
          class="w-8 h-8 text-purple-400 transform -rotate-6"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M3 5v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2zm2 0h14v14H5V5z"
          ></path>
          <path d="M7 7h10v2H7zm0 4h10v2H7zm0 4h7v2H7z"></path>
        </svg>
      </div>

      <!-- Floating Code Icons -->
      <div class="absolute top-32 right-10 opacity-20 animate-float-medium">
        <svg
          class="w-7 h-7 text-indigo-400 transform rotate-15"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"
          ></path>
        </svg>
      </div>
      <div class="absolute bottom-40 left-16 opacity-20 animate-float-slow">
        <svg
          class="w-6 h-6 text-cyan-400 transform -rotate-30"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"
          ></path>
        </svg>
      </div>

      <!-- Floating Light Bulbs -->
      <div class="absolute top-80 left-20 opacity-20 animate-float-fast">
        <svg
          class="w-9 h-9 text-yellow-300 transform rotate-6"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17h8v-2.3c1.8-1.2 3-3.3 3-5.7 0-3.9-3.1-7-7-7z"
          ></path>
        </svg>
      </div>

      <!-- Floating Paper Planes -->
      <div class="absolute top-10 right-1/4 opacity-20 animate-float-diagonal">
        <svg
          class="w-8 h-8 text-orange-400 transform rotate-45"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
        </svg>
      </div>
      <div
        class="absolute bottom-10 left-1/3 opacity-20 animate-float-diagonal-reverse"
      >
        <svg
          class="w-6 h-6 text-pink-400 transform -rotate-30"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
        </svg>
      </div>

      <!-- Floating Tags -->
      <div class="absolute top-96 right-32 opacity-20 animate-float-medium">
        <svg
          class="w-7 h-7 text-red-400 transform rotate-12"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M5.5 7A1.5 1.5 0 017 5.5h3.5L12 4l1.5 1.5H17A1.5 1.5 0 0118.5 7v10a1.5 1.5 0 01-1.5 1.5H7A1.5 1.5 0 015.5 17V7zm2 0a.5.5 0 110 1 .5.5 0 010-1z"
          ></path>
        </svg>
      </div>

      <!-- Floating Hearts (for blog love) -->
      <div class="absolute bottom-60 right-20 opacity-20 animate-pulse-slow">
        <svg
          class="w-6 h-6 text-rose-400 transform rotate-12"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
          ></path>
        </svg>
      </div>
    </div>

    <!-- Hero Section -->
    <section
      class="relative bg-gradient-to-br from-indigo-900/30 via-purple-900/30 to-gray-900/30 text-white overflow-hidden"
    >
      <div class="absolute inset-0 bg-black/20"></div>
      <div
        class="relative container mx-auto px-4 sm:px-6 lg:px-8 xl:px-12 py-16 sm:py-20 lg:py-24"
      >
        <div class="text-center max-w-6xl mx-auto">
          <!-- Breadcrumb -->
          <nav class="mb-8 sm:mb-10 lg:mb-12" aria-label="Breadcrumb">
            <ol
              class="flex items-center justify-center space-x-2 text-sm sm:text-base text-white/80"
            >
              <li>
                <a href="/" class="hover:text-white transition-colors">Home</a>
              </li>
              <li><span class="mx-2">/</span></li>
              <li>
                <a href="/blog" class="hover:text-white transition-colors"
                  >Blog</a
                >
              </li>
              <li><span class="mx-2">/</span></li>
              <li class="text-white font-medium">Tags</li>
              <li><span class="mx-2">/</span></li>
              <li class="text-white font-medium">#{tag.name}</li>
            </ol>
          </nav>

          <div class="flex items-center justify-center mb-6 sm:mb-8 lg:mb-10">
            <div
              class="px-6 sm:px-8 lg:px-10 py-3 sm:py-4 lg:py-5 rounded-full text-white font-bold text-xl sm:text-2xl lg:text-3xl mr-4 sm:mr-6 shadow-2xl backdrop-blur-sm border border-white/20"
              style={`background: linear-gradient(135deg, ${tag.color}cc, ${tag.color})`}
            >
              #{tag.name}
            </div>
          </div>

          <h1
            class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-black text-white mb-6 sm:mb-8 lg:mb-10 leading-tight"
          >
            Articles tagged with
            <span
              class="bg-gradient-to-r from-yellow-300 via-orange-300 to-red-300 bg-clip-text text-transparent"
            >
              "{tag.name}"
            </span>
          </h1>

          {
            tag.description && (
              <p class="text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl text-white/90 mb-8 sm:mb-10 lg:mb-12 max-w-4xl mx-auto leading-relaxed px-4">
                {tag.description}
              </p>
            )
          }

          <div
            class="inline-flex items-center px-4 sm:px-6 lg:px-8 py-2 sm:py-3 lg:py-4 bg-white/10 backdrop-blur-sm rounded-full text-white/90 text-sm sm:text-base lg:text-lg font-medium border border-white/20 shadow-lg"
          >
            <svg
              class="w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 mr-2 sm:mr-3"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a1.994 1.994 0 01-1.414.586H7a4 4 0 01-4-4V7a4 4 0 014-4z"
              ></path>
            </svg>
            {totalPosts} article{totalPosts !== 1 ? "s" : ""} with this tag
          </div>
        </div>
      </div>

      <!-- Wave Bottom -->
      <div class="absolute bottom-0 left-0 right-0">
        <svg
          class="w-full h-8 sm:h-12 lg:h-16 fill-current text-gray-900"
          viewBox="0 0 1440 48"
          preserveAspectRatio="none"
        >
          <path
            d="M0,48 C240,0 480,0 720,24 C960,48 1200,48 1440,24 L1440,48 L0,48 Z"
          ></path>
        </svg>
      </div>
    </section>

    <!-- Floating Filter Icons -->
    <div
      class="fixed left-4 md:left-6 lg:left-8 top-1/2 transform -translate-y-1/2 z-50 flex flex-col space-y-4"
    >
      <!-- Home -->
      <a
        href="/blog"
        class="group flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 bg-gray-800/90 backdrop-blur-md rounded-full text-white hover:bg-indigo-600 transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-700/50 hover:border-indigo-500/50 hover:scale-110"
        title="All Posts"
      >
        <svg
          class="w-5 h-5 sm:w-6 sm:h-6 group-hover:scale-110 transition-transform"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"
          ></path>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M8 5v14"></path>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 5v14"></path>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M16 5v14"></path>
        </svg>
      </a>

      <!-- Categories -->
      <div class="relative group">
        <button
          class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 bg-gray-800/90 backdrop-blur-md rounded-full text-white hover:bg-purple-600 transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-700/50 hover:border-purple-500/50 hover:scale-110"
          title="Categories"
        >
          <svg
            class="w-5 h-5 sm:w-6 sm:h-6 group-hover:scale-110 transition-transform"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 11H5m14-7H5m14 14H5"></path>
          </svg>
        </button>
      </div>

      <!-- Tags -->
      <div class="relative group">
        <button
          class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 bg-gray-800/90 backdrop-blur-md rounded-full text-white hover:bg-pink-600 transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-700/50 hover:border-pink-500/50 hover:scale-110"
          title="Tags"
        >
          <svg
            class="w-5 h-5 sm:w-6 sm:h-6 group-hover:scale-110 transition-transform"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a1.994 1.994 0 01-1.414.586H7a4 4 0 01-4-4V7a4 4 0 014-4z"
            ></path>
          </svg>
        </button>
      </div>
    </div>

    <div
      class="relative container mx-auto px-4 sm:px-6 lg:px-8 xl:px-12 py-12 sm:py-16 lg:py-20"
    >
      {
        posts.length > 0 ? (
          <>
            {/* <!-- Blog Posts Grid --> */}
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 sm:gap-10 lg:gap-12 xl:gap-16 mb-16 sm:mb-20 lg:mb-24">
              {posts.map((post: any) => (
                <article class="group relative bg-gray-800/60 backdrop-blur-sm rounded-2xl lg:rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 overflow-hidden border border-gray-700/50 hover:scale-[1.02] hover:border-gray-600/50 min-h-[600px] sm:min-h-[640px] lg:min-h-[700px] xl:min-h-[760px] flex flex-col">
                  <a href={`/blog/${post.slug}`} class="block">
                    {post.image ? (
                      <div class="aspect-[4/3] overflow-hidden rounded-t-2xl lg:rounded-t-3xl">
                        <Image
                          src={post.image}
                          alt={post.title}
                          width={500}
                          height={375}
                          class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
                          loading="lazy"
                        />
                      </div>
                    ) : (
                      <div class="aspect-[4/3] bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center rounded-t-2xl lg:rounded-t-3xl">
                        <div class="text-center text-white">
                          <svg
                            class="w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 mx-auto mb-3 opacity-80"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="1.5"
                              d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                            />
                          </svg>
                          <p class="text-sm md:text-base font-medium opacity-90">
                            Article
                          </p>
                        </div>
                      </div>
                    )}
                  </a>

                  <div class="p-6 sm:p-8 lg:p-10 xl:p-12 flex-1 flex flex-col">
                    {/* <!-- Category & Date --> */}
                    <div class="flex items-center justify-between mb-4 lg:mb-5">
                      {post.category && (
                        <a
                          href={`/blog/categories/${post.category.slug}`}
                          class="px-2 sm:px-3 lg:px-4 py-1 lg:py-1.5 text-xs sm:text-sm lg:text-base font-bold rounded-full text-white hover:opacity-80 transition-opacity shadow-lg"
                          style={`background: linear-gradient(135deg, ${post.category.color}cc, ${post.category.color})`}
                        >
                          {post.category.name}
                        </a>
                      )}
                      <time class="text-xs sm:text-sm lg:text-base text-gray-400">
                        {new Date(post.publishedAt).toLocaleDateString(
                          "en-US",
                          {
                            year: "numeric",
                            month: "short",
                            day: "numeric",
                          },
                        )}
                      </time>
                    </div>

                    {/* <!-- Title --> */}
                    <h3 class="text-lg sm:text-xl lg:text-2xl xl:text-3xl font-bold text-gray-100 mb-4 lg:mb-5 xl:mb-6 group-hover:text-indigo-400 transition-colors duration-300 line-clamp-2 leading-tight flex-shrink-0">
                      <a href={`/blog/${post.slug}`}>{post.title}</a>
                    </h3>

                    {/* <!-- Excerpt --> */}
                    {post.excerpt && (
                      <p class="text-sm sm:text-base lg:text-lg text-gray-300 mb-5 lg:mb-6 xl:mb-8 leading-relaxed line-clamp-3 flex-1">
                        {post.excerpt}
                      </p>
                    )}

                    {/* <!-- Tags (excluding current tag) --> */}
                    {post.tags.filter((t: any) => t.slug !== slug).length >
                      0 && (
                      <div class="flex flex-wrap gap-2 lg:gap-3 mb-5 lg:mb-6 flex-shrink-0">
                        {post.tags
                          .filter((t: any) => t.slug !== slug)
                          .slice(0, 2)
                          .map((postTag: any) => (
                            <a
                              href={`/blog/tags/${postTag.slug}`}
                              class="px-2 sm:px-3 lg:px-4 py-1 lg:py-1.5 text-xs sm:text-sm lg:text-base font-medium rounded-full text-white hover:opacity-80 transition-opacity shadow-sm"
                              style={`background-color: ${postTag.color}`}
                            >
                              #{postTag.name}
                            </a>
                          ))}
                        {post.tags.filter((t: any) => t.slug !== slug).length >
                          2 && (
                          <span class="px-2 sm:px-3 lg:px-4 py-1 lg:py-1.5 text-xs sm:text-sm lg:text-base font-medium rounded-full bg-gray-600 text-gray-200">
                            +
                            {post.tags.filter((t: any) => t.slug !== slug)
                              .length - 2}{" "}
                            more
                          </span>
                        )}
                      </div>
                    )}

                    {/* <!-- Author & Read Time --> */}
                    <div class="flex items-center justify-between pt-5 lg:pt-6 border-t border-gray-700 mt-auto flex-shrink-0">
                      {post.author && (
                        <div class="flex items-center gap-3 lg:gap-4 min-w-0 flex-1 mr-3">
                          {post.author.avatar ? (
                            <Image
                              src={post.author.avatar}
                              alt={post.author.name}
                              width={40}
                              height={40}
                              class="w-9 h-9 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-full object-cover ring-2 ring-gray-600 shadow-sm hover:ring-indigo-500 transition-all duration-300 flex-shrink-0"
                              loading="lazy"
                            />
                          ) : (
                            <div class="w-9 h-9 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded-full bg-gradient-to-br from-indigo-400 to-purple-400 flex items-center justify-center ring-2 ring-gray-600 shadow-sm hover:ring-indigo-500 transition-all duration-300 flex-shrink-0">
                              <span class="text-sm lg:text-base xl:text-lg font-bold text-white">
                                {post.author.name.charAt(0)}
                              </span>
                            </div>
                          )}
                          <div class="min-w-0 flex-1">
                            <p class="text-sm lg:text-base font-medium text-gray-200 truncate">
                              {post.author.name}
                            </p>
                            {post.author.title && (
                              <p class="text-xs lg:text-sm text-gray-400 truncate">
                                {post.author.title}
                              </p>
                            )}
                          </div>
                        </div>
                      )}
                      <div class="flex items-center gap-2 text-sm lg:text-base text-gray-400 flex-shrink-0">
                        <svg
                          class="w-4 h-4 lg:w-5 lg:h-5"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                          />
                        </svg>
                        {post.readTime} min read
                      </div>
                    </div>
                  </div>
                </article>
              ))}
            </div>

            {/* <!-- Pagination --> */}
            {totalPages > 1 && (
              <div class="flex items-center justify-center mt-12 sm:mt-16">
                <nav class="flex items-center space-x-1 sm:space-x-2 bg-gray-800/90 backdrop-blur-sm rounded-xl sm:rounded-2xl p-2 shadow-xl border border-gray-700/50">
                  {/* <!-- Previous Page --> */}
                  {currentPage > 1 && (
                    <a
                      href={`/blog/tags/${slug}${currentPage > 2 ? `?page=${currentPage - 1}` : ""}`}
                      class="flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-gray-300 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg sm:rounded-xl transition-all duration-300 shadow-sm hover:shadow-md"
                    >
                      <svg
                        class="w-3 h-3 sm:w-4 sm:h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M15 19l-7-7 7-7"
                        />
                      </svg>
                      <span class="hidden sm:inline">Previous</span>
                      <span class="sm:hidden">Prev</span>
                    </a>
                  )}

                  {/* <!-- Page Numbers --> */}
                  {Array.from({ length: totalPages }, (_, i) => i + 1).map(
                    (page) => (
                      <a
                        href={`/blog/tags/${slug}${page > 1 ? `?page=${page}` : ""}`}
                        class={`px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium rounded-lg sm:rounded-xl transition-all duration-300 ${
                          page === currentPage
                            ? "text-white bg-gradient-to-r from-indigo-500 to-purple-500 shadow-lg"
                            : "text-gray-300 bg-gray-700 hover:bg-gray-600 border border-gray-600 shadow-sm hover:shadow-md"
                        }`}
                      >
                        {page}
                      </a>
                    ),
                  )}

                  {/* <!-- Next Page --> */}
                  {currentPage < totalPages && (
                    <a
                      href={`/blog/tags/${slug}?page=${currentPage + 1}`}
                      class="flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-gray-300 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg sm:rounded-xl transition-all duration-300 shadow-sm hover:shadow-md"
                    >
                      <span class="hidden sm:inline">Next</span>
                      <span class="sm:hidden">Next</span>
                      <svg
                        class="w-3 h-3 sm:w-4 sm:h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M9 5l7 7-7 7"
                        />
                      </svg>
                    </a>
                  )}
                </nav>
              </div>
            )}
          </>
        ) : (
          <div class="text-center py-12 sm:py-20">
            <div class="max-w-md mx-auto px-4">
              <div class="mb-6 sm:mb-8">
                <div class="w-16 h-16 sm:w-24 sm:h-24 mx-auto mb-4 sm:mb-6 bg-gradient-to-br from-gray-700 to-gray-800 rounded-full flex items-center justify-center">
                  <svg
                    class="w-8 h-8 sm:w-12 sm:h-12 text-gray-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="1.5"
                      d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a1.994 1.994 0 01-1.414.586H7a4 4 0 01-4-4V7a4 4 0 014-4z"
                    />
                  </svg>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-100 mb-3 sm:mb-4">
                  No articles found
                </h3>
                <p class="text-sm sm:text-base text-gray-300 mb-6 sm:mb-8 leading-relaxed">
                  There are no articles tagged with "{tag.name}" yet.
                </p>
              </div>

              <a
                href="/blog"
                class="inline-flex items-center px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white font-semibold rounded-lg sm:rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 text-sm sm:text-base"
              >
                <svg
                  class="w-4 h-4 sm:w-5 sm:h-5 mr-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 19l-7-7 7-7"
                  />
                </svg>
                Browse All Articles
              </a>
            </div>
          </div>
        )
      }
    </div>
  </main>
</Layout>

<style>
  /* Modern CSS Reset and Utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Enhanced card hover effects */
  .blog-card {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .blog-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
  }

  /* Ensure proper aspect ratios */
  .blog-image {
    aspect-ratio: 16/9;
  }

  /* Enhanced selection */
  ::selection {
    background-color: rgba(99, 102, 241, 0.3);
    color: inherit;
  }

  /* Enhanced focus styles */
  select:focus,
  input:focus,
  button:focus,
  a:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
    transition: box-shadow 0.2s ease;
  }

  /* Smooth transitions for all interactive elements */
  * {
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Floating animations */
  @keyframes float-slow {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    50% {
      transform: translateY(-20px) rotate(5deg);
    }
  }

  @keyframes float-medium {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    50% {
      transform: translateY(-15px) rotate(-3deg);
    }
  }

  @keyframes float-fast {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    50% {
      transform: translateY(-10px) rotate(2deg);
    }
  }

  @keyframes float-diagonal {
    0%,
    100% {
      transform: translate(0px, 0px) rotate(45deg);
    }
    50% {
      transform: translate(10px, -10px) rotate(50deg);
    }
  }

  @keyframes float-diagonal-reverse {
    0%,
    100% {
      transform: translate(0px, 0px) rotate(-30deg);
    }
    50% {
      transform: translate(-10px, 10px) rotate(-35deg);
    }
  }

  @keyframes pulse-slow {
    0%,
    100% {
      opacity: 0.2;
      transform: scale(1);
    }
    50% {
      opacity: 0.4;
      transform: scale(1.1);
    }
  }

  .animate-float-slow {
    animation: float-slow 6s ease-in-out infinite;
  }

  .animate-float-medium {
    animation: float-medium 4s ease-in-out infinite;
  }

  .animate-float-fast {
    animation: float-fast 3s ease-in-out infinite;
  }

  .animate-float-diagonal {
    animation: float-diagonal 5s ease-in-out infinite;
  }

  .animate-float-diagonal-reverse {
    animation: float-diagonal-reverse 5s ease-in-out infinite reverse;
  }

  .animate-pulse-slow {
    animation: pulse-slow 4s ease-in-out infinite;
  }
</style>
