class c{currentSlide;track;prevBtn;nextBtn;indicators;slides;totalSlides;autoplayInterval;constructor(){this.currentSlide=0,this.track=document.getElementById("featured-carousel-track"),this.prevBtn=document.getElementById("featured-prev"),this.nextBtn=document.getElementById("featured-next"),this.indicators=document.querySelectorAll("#featured-indicators button"),this.slides=document.querySelectorAll("#featured-carousel-track > div"),this.totalSlides=this.slides.length,this.autoplayInterval=null,this.totalSlides>0&&this.init()}init(){this.prevBtn?.addEventListener("click",()=>this.prevSlide()),this.nextBtn?.addEventListener("click",()=>this.nextSlide()),this.indicators.forEach((e,s)=>{e.addEventListener("click",()=>this.goToSlide(s))}),this.startAutoplay();const t=document.getElementById("featured-carousel");t?.addEventListener("mouseenter",()=>this.stopAutoplay()),t?.addEventListener("mouseleave",()=>this.startAutoplay()),document.addEventListener("keydown",e=>{e.key==="ArrowLeft"&&this.prevSlide(),e.key==="ArrowRight"&&this.nextSlide()})}goToSlide(t){this.currentSlide=t,this.updateCarousel()}nextSlide(){this.currentSlide=(this.currentSlide+1)%this.totalSlides,this.updateCarousel()}prevSlide(){this.currentSlide=(this.currentSlide-1+this.totalSlides)%this.totalSlides,this.updateCarousel()}updateCarousel(){if(this.track){const t=-this.currentSlide*100;this.track.style.transform=`translateX(${t}%)`}this.indicators.forEach((t,e)=>{t.classList.toggle("bg-blue-500",e===this.currentSlide),t.classList.toggle("bg-gray-600",e!==this.currentSlide)})}startAutoplay(){this.stopAutoplay(),this.autoplayInterval=setInterval(()=>{this.nextSlide()},5e3)}stopAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}}class n{categoryFilter;technologyFilter;statusFilter;searchFilter;tagChips;clearFiltersBtn;resetFiltersBtn;projectCards;noResultsMessage;projectsGrid;activeFilters;constructor(){this.categoryFilter=document.getElementById("category-filter"),this.technologyFilter=document.getElementById("technology-filter"),this.statusFilter=document.getElementById("status-filter"),this.searchFilter=document.getElementById("search-filter"),this.tagChips=document.querySelectorAll(".tag-filter-chip"),this.clearFiltersBtn=document.getElementById("clear-filters"),this.resetFiltersBtn=document.getElementById("reset-filters"),this.projectCards=document.querySelectorAll(".project-card"),this.noResultsMessage=document.getElementById("no-results"),this.projectsGrid=document.getElementById("projects-grid"),this.activeFilters={category:"",technology:"",status:"",search:"",tags:new Set},this.init()}init(){this.categoryFilter?.addEventListener("change",()=>this.applyFilters()),this.technologyFilter?.addEventListener("change",()=>this.applyFilters()),this.statusFilter?.addEventListener("change",()=>this.applyFilters()),this.searchFilter?.addEventListener("input",this.debounce(()=>this.applyFilters(),300)),this.tagChips.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),this.toggleTagFilter(t)})}),this.clearFiltersBtn?.addEventListener("click",()=>this.clearAllFilters()),this.resetFiltersBtn?.addEventListener("click",()=>this.clearAllFilters()),this.projectsGrid?.classList.add("transition-all","duration-500","ease-out")}debounce(t,e){let s;return function(...a){const l=()=>{clearTimeout(s),t(...a)};clearTimeout(s),s=setTimeout(l,e)}}toggleTagFilter(t){const e=t.dataset.tag;t.classList.contains("active")?(t.classList.remove("active"),e!==void 0&&this.activeFilters.tags.delete(e)):(t.classList.add("active"),e!==void 0&&this.activeFilters.tags.add(e)),this.applyFilters()}applyFilters(){this.activeFilters.category=this.categoryFilter?.value||"",this.activeFilters.technology=this.technologyFilter?.value||"",this.activeFilters.status=this.statusFilter?.value||"",this.activeFilters.search=this.searchFilter?.value.toLowerCase()||"";let t=0;const e=Array.from(this.projectCards);let s=0;e.forEach((a,l)=>{this.shouldShowProject(a)?(a.classList.remove("hidden"),a.style.animationDelay=`${s*.1}s`,a.classList.add("animate-fade-in-up"),t++,s++):(a.classList.add("hidden"),a.classList.remove("animate-fade-in-up"))}),t===0?(this.noResultsMessage?.classList.remove("hidden"),this.projectsGrid?.classList.add("hidden")):(this.noResultsMessage?.classList.add("hidden"),this.projectsGrid?.classList.remove("hidden")),this.activeFilters.category||this.activeFilters.technology||this.activeFilters.status||this.activeFilters.search||this.activeFilters.tags.size>0?(this.clearFiltersBtn?.classList.remove("hidden"),this.clearFiltersBtn?.classList.add("animate-bounce-in")):(this.clearFiltersBtn?.classList.add("hidden"),this.clearFiltersBtn?.classList.remove("animate-bounce-in")),this.updateURL()}shouldShowProject(t){const e=t,s=e.dataset.category,i=JSON.parse(e.dataset.technologies||"[]"),a=JSON.parse(e.dataset.tags||"[]"),l=e.dataset.status,h=e.querySelector("h4")?.textContent?.toLowerCase()||"",d=e.querySelector("p")?.textContent?.toLowerCase()||"";return!(this.activeFilters.search&&!(h.includes(this.activeFilters.search)||d.includes(this.activeFilters.search)||i.some(o=>o.toLowerCase().includes(this.activeFilters.search))||a.some(o=>o.toLowerCase().includes(this.activeFilters.search)))||this.activeFilters.category&&s!==this.activeFilters.category||this.activeFilters.technology&&!i.includes(this.activeFilters.technology)||this.activeFilters.status&&l!==this.activeFilters.status||this.activeFilters.tags.size>0&&!Array.from(this.activeFilters.tags).every(o=>a.includes(o)))}updateURL(){const t=new URLSearchParams;this.activeFilters.category&&t.set("category",this.activeFilters.category),this.activeFilters.technology&&t.set("technology",this.activeFilters.technology),this.activeFilters.status&&t.set("status",this.activeFilters.status),this.activeFilters.search&&t.set("search",this.activeFilters.search),this.activeFilters.tags.size>0&&t.set("tags",Array.from(this.activeFilters.tags).join(","));const e=t.toString()?`${window.location.pathname}?${t.toString()}`:window.location.pathname;window.history.replaceState({},"",e)}loadFiltersFromURL(){const t=new URLSearchParams(window.location.search);t.get("category")&&this.categoryFilter&&(this.categoryFilter.value=t.get("category")??""),t.get("technology")&&this.technologyFilter&&(this.technologyFilter.value=t.get("technology")??""),t.get("status")&&this.statusFilter&&(this.statusFilter.value=t.get("status")??""),t.get("search")&&this.searchFilter&&(this.searchFilter.value=t.get("search")??"");const e=t.get("tags");if(e){const s=e.split(",");this.tagChips.forEach(i=>{i.dataset.tag&&s.includes(i.dataset.tag)&&(i.classList.add("active"),this.activeFilters.tags.add(i.dataset.tag))})}t.toString()&&this.applyFilters()}clearAllFilters(){this.categoryFilter&&(this.categoryFilter.value=""),this.technologyFilter&&(this.technologyFilter.value=""),this.statusFilter&&(this.statusFilter.value=""),this.searchFilter&&(this.searchFilter.value=""),this.tagChips.forEach(t=>{t.classList.remove("active")}),this.activeFilters={category:"",technology:"",status:"",search:"",tags:new Set},this.projectCards.forEach((t,e)=>{t.classList.remove("hidden"),t.style.animationDelay=`${e*.05}s`,t.classList.add("animate-fade-in-up")}),this.noResultsMessage?.classList.add("hidden"),this.projectsGrid?.classList.remove("hidden"),this.clearFiltersBtn?.classList.add("hidden"),window.history.replaceState({},"",window.location.pathname)}}document.addEventListener("DOMContentLoaded",()=>{new c,new n});document.addEventListener("astro:page-load",()=>{new c,new n});async function g(){try{const r=await fetch("/api/projects.json?pageSize=100");if(!r.ok)throw new Error("Failed to fetch updated projects");const t=await r.json();if(!t.projects||!t.projects.length)return;console.log(`Refreshed ${t.projects.length} projects from Strapi`);const e=await fetch("/api/featured-projects.json");if(!e.ok)throw new Error("Failed to fetch featured projects");const i=(await e.json()).projects||[];console.log(`Refreshed ${i.length} featured projects from Strapi`),document.querySelector(".featured-carousel")&&i.length>0&&console.log("Featured carousel could be updated with fresh data"),document.querySelector(".projects-grid")&&t.projects.length>0&&console.log("Projects grid could be updated with fresh data")}catch(r){console.error("Error refreshing projects:",r)}}setTimeout(g,2e3);
